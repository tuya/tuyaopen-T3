.. _wifi-AT:

**Wi-Fi AT命令**
=======================

:link_to_translation:`en:[English]`


.. important::

    *Armino 默认支持本节介绍的所有AT命令*


- :ref:`AT+WLMAC<wifi-mac>` :获取STA身份和SAP身份的MAC地址，也可以配置MAC地址

- :ref:`AT+STASTART<wifi-stastart>` :以STA身份连接至指定SSID的路由器上

- :ref:`AT+STASTOP<wifi-stastop>` :以STA身份从目前正在连接的路由器上断开

- :ref:`AT+WIFISTATUS<wifi-getstatus>` :用来查看wifi设备当前的模式状态或指定参数信息

- :ref:`AT+WIFISCAN<wifi-scan>` :扫描周围AP信息

- :ref:`AT+SAPSTART<wifi-sapstart>` :以SAP身份创建SoftAP

- :ref:`AT+SAPSTOP<wifi-stastop>` :停止当前开启的SoftAP

- :ref:`AT+STAPING<wifi-pingstart>` :进行指定IP地址和指定时长和每包大小的PING包操作

- :ref:`AT+STAPINGSTOP<wifi-pingstop>` :停止当前正在进行的PING包工作


.. _wifi-mac:

:ref:`AT+WLMAC<wifi-AT>` **:获取或配置STA身份和SAP身份的MAC地址**
------------------------------------------------------------------

**查询命令** ::    
    
    无

**执行命令** ::

    AT+WLMAC = mac_addr

**参数** ::

    无参数：获取当前设备的STA/SAP的MAC地址
    
    mac_addr(可选)

**响应** ::

    CMDRSP:OK

    CMDRSP:ERROR

**属性** :
    +-------------+-----------+------------+--------------------------+
    |  是否超时   |  超时时间 |  超时函数  |  是否触发超时ASSERT      | 
    +=============+===========+============+==========================+
    |     否      |     无    |    无      |        否                |
    +-------------+-----------+------------+--------------------------+

.. _wifi-stastart:

:ref:`AT+STASTART<wifi-AT>`  **:以STA身份连接至指定SSID的路由器上**
--------------------------------------------------------------------

**查询命令** ::    
    
    无

**执行命令** ::

    AT+STASTART = ssid, pwd(可选)

**参数** ::

    SSID：要以STA身份连接的AP路由器的SSID

    pwd：该AP的密码，如果该AP为OPEN则忽略此选项

**响应** ::

    CMDRSP:OK

    CMDRSP:ERROR

**属性** :
    +-------------+-----------+------------+--------------------------+
    |  是否超时   |  超时时间 |  超时函数  |  是否触发超时ASSERT      | 
    +=============+===========+============+==========================+
    |     是      |     10s   |    无      |        否                |
    +-------------+-----------+------------+--------------------------+

**AT消息** ::

    EVT:WLAN STA CONNECTED
    EVT:GOT-IP


.. _wifi-stastop:

:ref:`AT+STASTOP<wifi-at>` **:以STA身份从目前正在连接的路由器上断开**
-----------------------------------------------------------------------

**查询命令** ::    
    
    无

**执行命令** ::

    AT+STASTOP

**参数** ::

    无

**响应** ::

    CMDRSP:OK

    CMDRSP:ERROR

**属性** :
    +-------------+-----------+------------+--------------------------+
    |  是否超时   |  超时时间 |  超时函数  |  是否触发超时ASSERT      | 
    +=============+===========+============+==========================+
    |     否      |     无    |    无      |        否                |
    +-------------+-----------+------------+--------------------------+

**AT消息** ::

    EVT:WLAN STA DISCONNECTED

.. _wifi-getstatus:

:ref:`AT+WIFISTATUS<wifi-at>` **:用来查看wifi设备当前的模式状态或指定参数信息**
----------------------------------------------------------------------------------------------

**查询命令** ::    
    
    无

**执行命令** ::

   AT+WIFISTATUS = param(可选)

**参数** ::

    无参数：查看wifi设备当前的模式状态
    
    param:RSSI\BSSID\SSID\IP\CHANNEL
    可以返按照指定某个类型进行连接。

**属性** :
    +-------------+-----------+------------+--------------------------+
    |  是否超时   |  超时时间 |  超时函数  |  是否触发超时ASSERT      | 
    +=============+===========+============+==========================+
    |     否      |     无    |    无      |        否                |
    +-------------+-----------+------------+--------------------------+

**响应** ::

    CMDRSP:OK

    CMDRSP:ERROR

**AT消息** ::

    EVT:'sta: x, ap: x (1:对应身份已启动；0:对应身份未启动)



.. _wifi-scan:

:ref:`AT+WIFISCAN<wifi-at>` **:扫描周围AP信息**
----------------------------------------------------------------------------------------------

**查询命令** ::    
    
    无

**执行命令** ::

    AT+WIFISCAN = param(可选)

**参数** ::

    无参数：设备会扫描周围所有的AP信息并打印
    
    param:ssid/BSSID
    可以返按照指定某个类型进行连接。

**属性** :
    +-------------+-----------+------------+--------------------------+
    |  是否超时   |  超时时间 |  超时函数  |  是否触发超时ASSERT      | 
    +=============+===========+============+==========================+
    |     是      |     4ms   |    无      |        否                |
    +-------------+-----------+------------+--------------------------+

**响应** ::

    CMDRSP:OK

    CMDRSP:ERROR

**AT消息** ::

    EVT:WLAN STA SCAN_DONE


.. _wifi-sapstart:

:ref:`AT+SAPSTART<wifi-at>` **:以SAP身份创建SoftAP**
--------------------------------------------------------

**查询命令** ::    
    
    无

**执行命令** ::

    AT+SAPSTART

**参数** ::

    AT+SAPSTART=param1,param2(可选)

**参数含义** ::

    param1:SSID,想要创建的SoftAP的SSID字符串
    param2:pwd,想要创建的SoftAP的密码，如果想将SAP设为OPEN则忽视此选项

.. note::

    密码设置长度请大于8个字节，小于8个字节则按照OPEN处理！


**响应** ::

    CMDRSP:OK

    CMDRSP:ERROR

**属性** :
    +-------------+-----------+------------+--------------------------+
    |  是否超时   |  超时时间 |  超时函数  |  是否触发超时ASSERT      | 
    +=============+===========+============+==========================+
    |     否      |     无    |    无      |        否                |
    +-------------+-----------+------------+--------------------------+

**AT消息** ::

    当有STA连接至本SAP时打印
    EVT:WLAN SAP CONNECTED + 连接上的STA的MAC地址


.. _wifi-sapstop:

:ref:`AT+SAPSTOP<wifi-at>` **:停止当前开启的SoftAP**
--------------------------------------------------------------

**查询命令** ::    
    
    无

**执行命令** ::

    AT+SAPSTOP

**参数** ::

    无

**参数含义** ::

    无

**响应** ::

    CMDRSP:OK

    CMDRSP:ERROR

**属性** :
    +-------------+-----------+------------+--------------------------+
    |  是否超时   |  超时时间 |  超时函数  |  是否触发超时ASSERT      | 
    +=============+===========+============+==========================+
    |     否      |     无    |    无      |        否                |
    +-------------+-----------+------------+--------------------------+


.. _wifi-pingstart:

:ref:`AT+STAPING<wifi-at>` **:进行指定IP地址和指定时长和每包大小的PING包操作**
-------------------------------------------------------------------------------

**查询命令** ::    
    
    无

**执行命令** ::

    AT+STAPING=param1,param2,param3

**参数** ::

    param1:想要PING的目标IP地址
    param2:想要PING的包的个数
    param3:想要PING的包的大小

**响应** ::

    CMDRSP:OK

    CMDRSP:ERROR

**属性** :
    +-------------+-----------+------------+--------------------------+
    |  是否超时   |  超时时间 |  超时函数  |  是否触发超时ASSERT      | 
    +=============+===========+============+==========================+
    |     否      |     无    |    无      |        否                |
    +-------------+-----------+------------+--------------------------+


.. _wifi-pingstop:

:ref:`AT+STAPINGSTOP<wifi-at>` **:停止当前正在进行的PING包工作**
------------------------------------------------------------------------

**查询命令** ::    
    
    无

**执行命令** ::

    AT+STAPINGSTOP

**参数** ::

    无

**响应** ::

    CMDRSP:OK

    CMDRSP:ERROR

**属性** :
    +-------------+-----------+------------+--------------------------+
    |  是否超时   |  超时时间 |  超时函数  |  是否触发超时ASSERT      | 
    +=============+===========+============+==========================+
    |     否      |     无    |    无      |        否                |
    +-------------+-----------+------------+--------------------------+